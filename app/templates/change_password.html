{% extends "base.html" %}

{% block content %}

<div class="p-4 mx-auto max-w-xl sm:p-6 lg:p-8">
    <!-- Header -->
    <div class="pb-6 mb-6">
        <a href="{% url 'profile' %}" class="text-sm text-orange-400 hover:underline">&larr; Volver a Mi Perfil</a>
        <h2 class="mt-2 text-3xl font-bold text-white">Seguridad</h2>
        <p class="text-gray-400">Actualiza tu contraseña para mantener tu cuenta segura.</p>
    </div>

    <!-- Error Alert -->
    {% if error %}
    <div class="p-4 mb-6 text-red-200 bg-red-900 border border-red-700 rounded-lg flex items-center gap-2" role="alert">
        <svg class="w-5 h-5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
        <span>{{ error }}</span>
    </div>
    {% endif %}

    <!-- Formulario -->
    <form action="{% url 'change_password' %}" method="POST" class="p-6 space-y-6 bg-gray-800 rounded-xl border border-gray-700 shadow-xl">
        {% csrf_token %}

        <div class="space-y-4">
            
            <!-- Contraseña Actual -->
            <div>
                <label for="current_password" class="block text-sm font-medium text-gray-300">Contraseña Actual</label>
                <div class="relative mt-1">
                    <input type="password" name="current_password" id="current_password" required
                           class="block w-full px-3 py-2 text-white bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors"
                           placeholder="••••••••">
                </div>
            </div>

            <hr class="border-gray-700 my-4">

            <!-- Nueva Contraseña -->
            <div>
                <label for="new_password" class="block text-sm font-medium text-gray-300">Nueva Contraseña</label>
                <input type="password" name="new_password" id="new_password" required
                       class="block w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors"
                       placeholder="Mínimo 8 caracteres">
            </div>

            <!-- Confirmar Nueva Contraseña -->
            <div>
                <label for="confirm_password" class="block text-sm font-medium text-gray-300">Confirmar Nueva Contraseña</label>
                <input type="password" name="confirm_password" id="confirm_password" required
                       class="block w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors"
                       placeholder="Repite la nueva contraseña">
            </div>

        </div>

        <!-- Botones -->
        <div class="flex justify-end gap-3 pt-4 border-t border-gray-700">
            <a href="{% url 'profile' %}" class="px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 border border-transparent rounded-lg hover:bg-gray-600 transition-colors">
                Cancelar
            </a>
            <button type="submit" class="px-6 py-2 text-sm font-bold text-white bg-orange-500 border border-transparent rounded-lg hover:bg-orange-600 shadow-lg shadow-orange-500/20 transition-colors">
                Actualizar Contraseña
            </button>
        </div>
    </form>
</div>

{% endblock %}